# Helper: Ensure app is on home screen (sign in if needed)
# This handles both fresh app (needs sign-in) and already signed-in states
# Uses environment variables for credentials:
#   E2E_TEST_EMAIL - test account email
#   E2E_TEST_PASSWORD - test account password
appId: com.discr.app
---
# Wait for app to fully load - gives time for splash screen, auth check, etc.
- extendedWaitUntil:
    visible:
      anyOf:
        - "Sign In"
        - "Home"
        - "My Bag"
        - "Profile"
    timeout: 30000

# Sign in if needed
- runFlow:
    when:
      visible: "Sign In"
    file: do-sign-in.yaml

# Tap Home tab to ensure we're on the home screen
- tapOn: "Home"
- waitForAnimationToEnd
