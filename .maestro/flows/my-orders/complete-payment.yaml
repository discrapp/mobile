# My Orders - Complete Payment Test
# Verifies users can resume payment for pending_payment orders
# Prerequisites: Must have a pending_payment order
# Note: This test stops at opening Stripe (can't automate external browser)
appId: com.discr.app
---
- launchApp:
    clearState: true

# Ensure we're on home screen (sign in if needed)
- runFlow:
    file: ../helpers/ensure-home-screen.yaml

# Navigate to My Orders (from home screen quick action)
- tapOn: "My Orders"
- waitForAnimationToEnd

# Find a pending payment order
- runFlow:
    when:
      visible: "Pending Payment"
    commands:
      # Verify Complete Payment button is visible
      - assertVisible: "Complete Payment"

      # Tap Complete Payment
      - tapOn: "Complete Payment"

      # Brief wait for loading state (optional, may be too quick to catch)
      - waitForAnimationToEnd

      # Note: At this point, Stripe checkout opens in browser
      # We can't automate the external browser, so test stops here
      # Manual verification needed for full payment flow
